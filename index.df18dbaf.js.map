{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAUC,SAASC,cAAc,aACjCC,EAAuBF,SAASC,cAAc,2BAC9CE,EAAwBH,SAASC,cACrC,6BAEIG,EAAYJ,SAASC,cAAc,eACnCI,EAAYL,SAASC,cAAc,mBACnCK,EAAaN,SAASC,cAAc,gBACpCM,EAAkBP,SAASC,cAAc,qBACzCO,EAAaR,SAASC,cAAc,gBACpCQ,EAAeT,SAASC,cAAc,kBACtCS,EAAiBV,SAASC,cAAc,oBACxCU,EAAkBX,SAASC,cAAc,uBACzCW,EAAiBZ,SAASC,cAAc,qBAE9C,IAAIY,EACAC,EACFC,KAAKC,MAAMC,aAAaC,QAAQ,uBAAyB,GAe3DC,eAAeC,EAAeC,GAE5B,GADAA,EAAMC,iBACDD,EAAME,OAAOC,WAAWC,aAAa,eAG1C,IACEZ,QA+BJM,eAA2BO,GACzB,MAAMC,QAAiB9B,EAAA+B,QAAMC,IAC3B,6CAA6CH,KAE/C,aAAaC,EAASG,I,CAnCHC,CAAYV,EAAME,OAAOC,WAAWQ,QAAQC,QAC7DlC,EAAQmC,oBAAoB,QAASd,GACrClB,EAAqBiC,UAAUC,QAAQ,SAAU,WACjDhC,EAAUiC,aAAa,MAAOxB,EAASyB,YACvClC,EAAUiC,aAAa,MAAOxB,EAAS0B,OACvClC,EAAUmC,YAAc3B,EAAS0B,MACjCjC,EAAWkC,YAAc3B,EAAS4B,OAClClC,EAAgBiC,YAAc3B,EAAS6B,YACvC,MAAMC,EAAY9B,EAAS+B,UAAUC,MACnCC,GAA4B,WAAjBA,EAAQC,OACnBC,IACIC,EAAcpC,EAAS+B,UAAUC,MACrCC,GAA4B,aAAjBA,EAAQC,OACnBC,IACIE,EAAgBrC,EAAS+B,UAAUC,MACvCC,GAA4B,gBAAjBA,EAAQC,OACnBC,IACFxC,EAAW6B,aAAa,OAAQM,GAChClC,EAAa4B,aAAa,OAAQY,GAClCvC,EAAe2B,aAAa,OAAQa,GACpCC,G,CACA,MACAC,QAAQC,IAAI,Q,EAIhB,SAASC,IACPpD,EAAqBiC,UAAUC,QAAQ,UAAW,UAClDrC,EAAQwD,iBAAiB,QAASnC,E,CAUpC,SAAS+B,IACPC,QAAQC,IAAIvC,GACRA,EAAgB0C,MAAKC,GAAQA,EAAKC,MAAQ7C,EAAS6C,OACrD/C,EAAgBuB,oBAAoB,QAASyB,GAC7ChD,EAAgB4C,iBAAiB,QAASK,GAC1CjD,EAAgB6B,YAAc,2BAC9B5B,EAAeuB,UAAUC,QAAQ,SAAU,aAE3CzB,EAAgBuB,oBAAoB,QAAS0B,GAC7CjD,EAAgB4C,iBAAiB,QAASI,GAC1ChD,EAAgB6B,YAAc,sBAC9B5B,EAAeuB,UAAUC,QAAQ,UAAW,WAE9CnB,aAAa4C,QAAQ,oBAAqB9C,KAAK+C,UAAUhD,G,CAG3D,SAAS6C,IACPP,QAAQC,IAAI,UACZvC,EAAgBiD,KAAKlD,GACrBsC,G,CAGF,SAASS,IACPR,QAAQC,IAAI,YACZvC,EAAkBA,EAAgBkD,QAAOP,GAAQA,EAAKC,MAAQ7C,EAAS6C,MACvEP,G,CAlFFpD,EAAQwD,iBAAiB,QAASnC,GAClCjB,EAAsBoD,iBAAiB,QAASD,GAChDpD,EAAqBqD,iBAAiB,SAASlC,IACzCA,EAAME,OAAOY,UAAU8B,SAAS,2BAClCX,GAAiB,IAGrBtD,SAASuD,iBAAiB,WAAWlC,IACjB,WAAdA,EAAM6C,KACRZ,GAAiB","sources":["src/js/pop-up.js"],"sourcesContent":["import axios from 'axios';\n\nconst jsBooks = document.querySelector('.js-books');\nconst popupModalBackground = document.querySelector('.popup-modal-background');\nconst popupModalCloseButton = document.querySelector(\n  '.popup-modal-close-button'\n);\nconst bookImage = document.querySelector('.book-image');\nconst bookTitle = document.querySelector('.book-title-pop');\nconst bookAuthor = document.querySelector('.book-author');\nconst bookDescription = document.querySelector('.book-description');\nconst amazonLink = document.querySelector('.amazon-link');\nconst bookshopLink = document.querySelector('.bookshop-link');\nconst applebooksLink = document.querySelector('.applebooks-link');\nconst addToListButton = document.querySelector('.add-to-list-button');\nconst bookAddingText = document.querySelector(\".book-adding-text\");\n\nlet bookData;\nlet bookShopingList =\n  JSON.parse(localStorage.getItem('bookShopingListLS')) || [];\n\njsBooks.addEventListener('click', openPopupModal);\npopupModalCloseButton.addEventListener('click', closePopupModal);\npopupModalBackground.addEventListener('click', event => {\n  if (event.target.classList.contains('popup-modal-background')) {\n    closePopupModal();\n  }\n});\ndocument.addEventListener('keydown', event => {\n  if (event.key === 'Escape') {\n    closePopupModal();\n  }\n});\n\nasync function openPopupModal(event) {\n  event.preventDefault();\n  if (!event.target.parentNode.hasAttribute('data-bookid')) {\n    return;\n  }\n  try {\n    bookData = await getBookInfo(event.target.parentNode.dataset.bookid);\n    jsBooks.removeEventListener('click', openPopupModal);\n    popupModalBackground.classList.replace('hidden', 'visible');\n    bookImage.setAttribute('src', bookData.book_image);\n    bookImage.setAttribute('alt', bookData.title);\n    bookTitle.textContent = bookData.title;\n    bookAuthor.textContent = bookData.author;\n    bookDescription.textContent = bookData.description;\n    const amazonURL = bookData.buy_links.find(\n      buyLink => buyLink.name === 'Amazon'\n    ).url;\n    const bookshopURL = bookData.buy_links.find(\n      buyLink => buyLink.name === 'Bookshop'\n    ).url;\n    const applebooksURL = bookData.buy_links.find(\n      buyLink => buyLink.name === 'Apple Books'\n    ).url;\n    amazonLink.setAttribute('href', amazonURL);\n    bookshopLink.setAttribute('href', bookshopURL);\n    applebooksLink.setAttribute('href', applebooksURL);\n    bookPresenseCheck();\n  } catch {\n    console.log('Error');\n  }\n}\n\nfunction closePopupModal() {\n  popupModalBackground.classList.replace('visible', 'hidden');\n  jsBooks.addEventListener('click', openPopupModal);\n}\n\nasync function getBookInfo(bookId) {\n  const response = await axios.get(\n    `https://books-backend.p.goit.global/books/${bookId}`\n  );\n  return await response.data;\n}\n\nfunction bookPresenseCheck() {\n  console.log(bookShopingList);\n  if (bookShopingList.some(book => book._id === bookData._id)) {\n    addToListButton.removeEventListener('click', addToListFunction);\n    addToListButton.addEventListener('click', removeFromListFunction);\n    addToListButton.textContent = 'REMOVE FROM SHOPING LIST';\n    bookAddingText.classList.replace('hidden', 'visible');\n  } else {\n    addToListButton.removeEventListener('click', removeFromListFunction);\n    addToListButton.addEventListener('click', addToListFunction);\n    addToListButton.textContent = 'ADD TO SHOPING LIST';\n    bookAddingText.classList.replace('visible', 'hidden');\n  }\n  localStorage.setItem('bookShopingListLS', JSON.stringify(bookShopingList));\n}\n\nfunction addToListFunction() {\n  console.log('Added!');\n  bookShopingList.push(bookData);\n  bookPresenseCheck();\n}\n\nfunction removeFromListFunction() {\n  console.log('Removed!');\n  bookShopingList = bookShopingList.filter(book => book._id !== bookData._id);\n  bookPresenseCheck();\n}\n"],"names":["$2shzp","parcelRequire","$0244a5a1b3e8d0b6$var$jsBooks","document","querySelector","$0244a5a1b3e8d0b6$var$popupModalBackground","$0244a5a1b3e8d0b6$var$popupModalCloseButton","$0244a5a1b3e8d0b6$var$bookImage","$0244a5a1b3e8d0b6$var$bookTitle","$0244a5a1b3e8d0b6$var$bookAuthor","$0244a5a1b3e8d0b6$var$bookDescription","$0244a5a1b3e8d0b6$var$amazonLink","$0244a5a1b3e8d0b6$var$bookshopLink","$0244a5a1b3e8d0b6$var$applebooksLink","$0244a5a1b3e8d0b6$var$addToListButton","$0244a5a1b3e8d0b6$var$bookAddingText","$0244a5a1b3e8d0b6$var$bookData","$0244a5a1b3e8d0b6$var$bookShopingList","JSON","parse","localStorage","getItem","async","$0244a5a1b3e8d0b6$var$openPopupModal","event","preventDefault","target","parentNode","hasAttribute","bookId","response","default","get","data","$0244a5a1b3e8d0b6$var$getBookInfo","dataset","bookid","removeEventListener","classList","replace","setAttribute","book_image","title","textContent","author","description","amazonURL","buy_links","find","buyLink","name","url","bookshopURL","applebooksURL","$0244a5a1b3e8d0b6$var$bookPresenseCheck","console","log","$0244a5a1b3e8d0b6$var$closePopupModal","addEventListener","some","book","_id","$0244a5a1b3e8d0b6$var$addToListFunction","$0244a5a1b3e8d0b6$var$removeFromListFunction","setItem","stringify","push","filter","contains","key"],"version":3,"file":"index.df18dbaf.js.map"}