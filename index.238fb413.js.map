{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAUC,SAASC,cAAc,aACjCC,EAAuBF,SAASC,cAAc,2BAC9CE,EAAwBH,SAASC,cAAc,6BAC/CG,EAAYJ,SAASC,cAAc,eACnCI,EAAYL,SAASC,cAAc,eACnCK,EAAaN,SAASC,cAAc,gBACpCM,EAAkBP,SAASC,cAAc,qBACzCO,EAAkBR,SAASC,cAAc,uBACzCQ,EAAaT,SAASC,cAAc,gBACpCS,EAAeV,SAASC,cAAc,kBACtCU,EAAiBX,SAASC,cAAc,oBAE9C,IAAIW,EACAC,EAAkBC,KAAKC,MAAMC,aAAaC,QAAQ,uBAAyB,GAwC/E,SAASC,IACPhB,EAAqBiB,UAAUC,QAAQ,UAAW,S,CAUpD,SAASC,IACPC,QAAQC,IAAIV,GACRA,EAAgBW,MAAMC,GAASA,EAAKC,MAAQd,EAASc,OACvDlB,EAAgBmB,oBAAoB,QAASC,GAC7CpB,EAAgBqB,iBAAiB,QAASC,GAC1CtB,EAAgBuB,YAAc,6BAG9BvB,EAAgBmB,oBAAoB,QAASG,GAC7CtB,EAAgBqB,iBAAiB,QAASD,GAC1CpB,EAAgBuB,YAAc,uBAEhCf,aAAagB,QAAQ,oBAAqBlB,KAAKmB,UAAUpB,G,CAI3D,SAASe,IACPN,QAAQC,IAAI,UACZV,EAAgBqB,KAAKtB,GACrBS,G,CAIF,SAASS,IACPR,QAAQC,IAAI,YACZV,EAAkBA,EAAgBsB,QAAQV,GAASA,EAAKC,MAAQd,EAASc,MACzEL,G,CA3EFtB,EAAQ8B,iBAAiB,SAazBO,eAA8BC,GAC5BA,EAAMC,iBACN,IACE1B,QA2BJwB,eAA2BG,GACzB,MAAMC,QAAiB3C,EAAA4C,QAAMC,IAAI,6CAA6CH,KAC9E,aAAaC,EAASG,I,CA7BHC,CAAYP,EAAMQ,OAAOC,WAAWC,QAAQC,QAC7D9C,EAAqBiB,UAAUC,QAAQ,SAAU,WACjDhB,EAAU6C,aAAa,MAAOrC,EAASsC,YACvC9C,EAAU6C,aAAa,MAAOrC,EAASuC,OACvC9C,EAAU0B,YAAcnB,EAASuC,MACjC7C,EAAWyB,YAAcnB,EAASwC,OAClC7C,EAAgBwB,YAAcnB,EAASyC,YACvC,MAAMC,EAAY1C,EAAS2C,UAAUC,MAAMC,GAA6B,WAAjBA,EAAQC,OAAmBC,IAC5EC,EAAchD,EAAS2C,UAAUC,MAAMC,GAA6B,aAAjBA,EAAQC,OAAqBC,IAChFE,EAAgBjD,EAAS2C,UAAUC,MAAMC,GAA6B,gBAAjBA,EAAQC,OAAwBC,IAC3FlD,EAAWwC,aAAa,OAAQK,GAChC5C,EAAauC,aAAa,OAAQW,GAClCjD,EAAesC,aAAa,OAAQY,GACpCxC,G,CAGF,MACEC,QAAQC,IAAI,Q,KAhChBpB,EAAsB0B,iBAAiB,QAASX,GAChDhB,EAAqB2B,iBAAiB,SAASQ,IACzCA,EAAMQ,OAAO1B,UAAU2C,SAAS,2BAClC5C,GAAiB,IAGrBlB,SAAS6B,iBAAiB,WAAWQ,IACjB,WAAdA,EAAM0B,KACR7C,GAAiB","sources":["src/js/pop-up.js"],"sourcesContent":["import axios from \"axios\";\n\nconst jsBooks = document.querySelector(\".js-books\");\nconst popupModalBackground = document.querySelector(\".popup-modal-background\");\nconst popupModalCloseButton = document.querySelector(\".popup-modal-close-button\");\nconst bookImage = document.querySelector(\".book-image\");\nconst bookTitle = document.querySelector(\".book-title\");\nconst bookAuthor = document.querySelector(\".book-author\");\nconst bookDescription = document.querySelector(\".book-description\");\nconst addToListButton = document.querySelector(\".add-to-list-button\");\nconst amazonLink = document.querySelector(\".amazon-link\");\nconst bookshopLink = document.querySelector(\".bookshop-link\");\nconst applebooksLink = document.querySelector(\".applebooks-link\");\n\nlet bookData;\nlet bookShopingList = JSON.parse(localStorage.getItem(\"bookShopingListLS\")) || [];\n\njsBooks.addEventListener(\"click\", openPopupModal);\npopupModalCloseButton.addEventListener(\"click\", closePopupModal);\npopupModalBackground.addEventListener(\"click\", event => {\n  if (event.target.classList.contains(\"popup-modal-background\")) {\n    closePopupModal();\n  }\n});\ndocument.addEventListener(\"keydown\", event => {\n  if (event.key === \"Escape\") {\n    closePopupModal();\n  }\n});\n\nasync function openPopupModal(event) {\n  event.preventDefault();\n  try {\n    bookData = await getBookInfo(event.target.parentNode.dataset.bookid);\n    popupModalBackground.classList.replace(\"hidden\", \"visible\");\n    bookImage.setAttribute(\"src\", bookData.book_image);\n    bookImage.setAttribute(\"alt\", bookData.title);\n    bookTitle.textContent = bookData.title;\n    bookAuthor.textContent = bookData.author;\n    bookDescription.textContent = bookData.description;\n    const amazonURL = bookData.buy_links.find((buyLink) => buyLink.name === \"Amazon\").url;\n    const bookshopURL = bookData.buy_links.find((buyLink) => buyLink.name === \"Bookshop\").url;\n    const applebooksURL = bookData.buy_links.find((buyLink) => buyLink.name === \"Apple Books\").url;\n    amazonLink.setAttribute(\"href\", amazonURL);\n    bookshopLink.setAttribute(\"href\", bookshopURL);\n    applebooksLink.setAttribute(\"href\", applebooksURL);\n    bookPresenseCheck();\n\n  }\n  catch {\n    console.log(\"Error\");\n  }\n}\n\n\nfunction closePopupModal() {\n  popupModalBackground.classList.replace(\"visible\", \"hidden\");\n}\n\n\nasync function getBookInfo(bookId) {\n  const response = await axios.get(`https://books-backend.p.goit.global/books/${bookId}`);\n  return await response.data;\n}\n\n\nfunction bookPresenseCheck() {\n  console.log(bookShopingList);\n  if (bookShopingList.some((book) => book._id === bookData._id)) {\n    addToListButton.removeEventListener(\"click\", addToListFunction);\n    addToListButton.addEventListener(\"click\", removeFromListFunction);\n    addToListButton.textContent = \"REMOVE FROM SHOPING LIST\";\n  }\n  else {\n    addToListButton.removeEventListener(\"click\", removeFromListFunction);\n    addToListButton.addEventListener(\"click\", addToListFunction);\n    addToListButton.textContent = \"ADD TO SHOPING LIST\";\n  }\n  localStorage.setItem(\"bookShopingListLS\", JSON.stringify(bookShopingList));\n}\n\n\nfunction addToListFunction() {\n  console.log(\"Added!\");\n  bookShopingList.push(bookData);\n  bookPresenseCheck();\n}\n\n\nfunction removeFromListFunction() {\n  console.log(\"Removed!\");\n  bookShopingList = bookShopingList.filter((book) => book._id !== bookData._id);\n  bookPresenseCheck();\n}\n\n\n"],"names":["$2shzp","parcelRequire","$0244a5a1b3e8d0b6$var$jsBooks","document","querySelector","$0244a5a1b3e8d0b6$var$popupModalBackground","$0244a5a1b3e8d0b6$var$popupModalCloseButton","$0244a5a1b3e8d0b6$var$bookImage","$0244a5a1b3e8d0b6$var$bookTitle","$0244a5a1b3e8d0b6$var$bookAuthor","$0244a5a1b3e8d0b6$var$bookDescription","$0244a5a1b3e8d0b6$var$addToListButton","$0244a5a1b3e8d0b6$var$amazonLink","$0244a5a1b3e8d0b6$var$bookshopLink","$0244a5a1b3e8d0b6$var$applebooksLink","$0244a5a1b3e8d0b6$var$bookData","$0244a5a1b3e8d0b6$var$bookShopingList","JSON","parse","localStorage","getItem","$0244a5a1b3e8d0b6$var$closePopupModal","classList","replace","$0244a5a1b3e8d0b6$var$bookPresenseCheck","console","log","some","book","_id","removeEventListener","$0244a5a1b3e8d0b6$var$addToListFunction","addEventListener","$0244a5a1b3e8d0b6$var$removeFromListFunction","textContent","setItem","stringify","push","filter","async","event","preventDefault","bookId","response","default","get","data","$0244a5a1b3e8d0b6$var$getBookInfo","target","parentNode","dataset","bookid","setAttribute","book_image","title","author","description","amazonURL","buy_links","find","buyLink","name","url","bookshopURL","applebooksURL","contains","key"],"version":3,"file":"index.238fb413.js.map"}