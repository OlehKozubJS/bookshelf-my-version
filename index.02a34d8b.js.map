{"mappings":"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","sources":["src/js/pop-up.js"],"sourcesContent":["import axios from \"axios\";\n\nconst jsBooks = document.querySelector(\".js-books\");\nconst popupModalBackground = document.querySelector(\".popup-modal-background\");\nconst popupModalCloseButton = document.querySelector(\".popup-modal-close-button\");\nconst bookImage = document.querySelector(\".book-image\");\nconst bookTitle = document.querySelector(\".book-title\");\nconst bookAuthor = document.querySelector(\".book-author\");\nconst bookDescription = document.querySelector(\".book-description\");\nconst addToListButton = document.querySelector(\".add-to-list-button\");\nconst amazonLink = document.querySelector(\".amazon-link\");\nconst bookshopLink = document.querySelector(\".bookshop-link\");\nconst applebooksLink = document.querySelector(\".applebooks-link\");\n\nlet bookData;\nlet bookShopingList = JSON.parse(localStorage.getItem(\"bookShopingListLS\")) || [];\n\njsBooks.addEventListener(\"click\", openPopupModal);\npopupModalCloseButton.addEventListener(\"click\", closePopupModal);\npopupModalBackground.addEventListener(\"click\", event => {\n  if (event.target.classList.contains(\"popup-modal-background\")) {\n    closePopupModal();\n  }\n});\ndocument.addEventListener(\"keydown\", event => {\n  if (event.key === \"Escape\") {\n    closePopupModal();\n  }\n});\n\n\nasync function openPopupModal(event) {\n  event.preventDefault();\n  try {\n    bookData = await getBookInfo(event.target.parentNode.dataset.bookid);\n    popupModalBackground.classList.replace(\"hidden\", \"visible\");\n    bookImage.setAttribute(\"src\", bookData.book_image);\n    bookImage.setAttribute(\"alt\", bookData.title);\n    bookTitle.textContent = bookData.title;\n    bookAuthor.textContent = bookData.author;\n    bookDescription.textContent = bookData.description;\n    const amazonURL = bookData.buy_links.find((buyLink) => buyLink.name === \"Amazon\").url;\n    const bookshopURL = bookData.buy_links.find((buyLink) => buyLink.name === \"Bookshop\").url;\n    const applebooksURL = bookData.buy_links.find((buyLink) => buyLink.name === \"Apple Books\").url;\n    amazonLink.setAttribute(\"href\", amazonURL);\n    bookshopLink.setAttribute(\"href\", bookshopURL);\n    applebooksLink.setAttribute(\"href\", applebooksURL);\n    bookPresenseCheck();\n\n  }\n  catch {\n    console.log(\"Error\");\n  }\n}\n\n\nfunction closePopupModal() {\n  popupModalBackground.classList.replace(\"visible\", \"hidden\");\n}\n\n\nasync function getBookInfo(bookId) {\n  const response = await axios.get(`https://books-backend.p.goit.global/books/${bookId}`);\n  return await response.data;\n}\n\n\nfunction bookPresenseCheck() {\n  console.log(bookShopingList);\n  if (bookShopingList.some((book) => book._id === bookData._id)) {\n    addToListButton.removeEventListener(\"click\", addToListFunction);\n    addToListButton.addEventListener(\"click\", removeFromListFunction);\n    addToListButton.textContent = \"REMOVE FROM SHOPING LIST\";\n  }\n  else {\n    addToListButton.removeEventListener(\"click\", removeFromListFunction);\n    addToListButton.addEventListener(\"click\", addToListFunction);\n    addToListButton.textContent = \"ADD TO SHOPING LIST\";\n  }\n  localStorage.setItem(\"bookShopingListLS\", JSON.stringify(bookShopingList));\n}\n\n\nfunction addToListFunction() {\n  console.log(\"Added!\");\n  bookShopingList.push(bookData);\n  bookPresenseCheck();\n}\n\n\nfunction removeFromListFunction() {\n  console.log(\"Removed!\");\n  bookShopingList = bookShopingList.filter((book) => book._id !== bookData._id);\n  bookPresenseCheck();\n}\n\n\n"],"names":["$dae67d51b9dcdf97$var$bookData","$bpxeT","parcelRequire","$dae67d51b9dcdf97$var$jsBooks","document","querySelector","$dae67d51b9dcdf97$var$popupModalBackground","$dae67d51b9dcdf97$var$popupModalCloseButton","$dae67d51b9dcdf97$var$bookImage","$dae67d51b9dcdf97$var$bookTitle","$dae67d51b9dcdf97$var$bookAuthor","$dae67d51b9dcdf97$var$bookDescription","$dae67d51b9dcdf97$var$addToListButton","$dae67d51b9dcdf97$var$amazonLink","$dae67d51b9dcdf97$var$bookshopLink","$dae67d51b9dcdf97$var$applebooksLink","$dae67d51b9dcdf97$var$bookShopingList","JSON","parse","localStorage","getItem","$dae67d51b9dcdf97$var$_openPopupModal","$parcel$interopDefault","$2TvXO","mark","_callee","event","amazonURL","bookshopURL","applebooksURL","preventDefault","$dae67d51b9dcdf97$var$getBookInfo","target","parentNode","dataset","bookid","_ctx","sent","classList","replace","setAttribute","book_image","title","textContent","author","description","buy_links","find","buyLink","name","url","$dae67d51b9dcdf97$var$bookPresenseCheck","console","log","apply","this","arguments","$dae67d51b9dcdf97$var$closePopupModal","bookId","$dae67d51b9dcdf97$var$_getBookInfo","response","$dIxxU","default","get","concat","data","some","book","_id","removeEventListener","$dae67d51b9dcdf97$var$addToListFunction","addEventListener","$dae67d51b9dcdf97$var$removeFromListFunction","setItem","stringify","push","filter","contains","key"],"version":3,"file":"index.02a34d8b.js.map"}