{"mappings":"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","sources":["src/js/pop-up.js"],"sourcesContent":["import axios from 'axios';\n\nconst jsBooks = document.querySelector('.js-books');\nconst popupModalBackground = document.querySelector('.popup-modal-background');\nconst popupModalCloseButton = document.querySelector(\n  '.popup-modal-close-button'\n);\nconst bookImage = document.querySelector('.book-image');\nconst bookTitle = document.querySelector('.book-title-pop');\nconst bookAuthor = document.querySelector('.book-author');\nconst bookDescription = document.querySelector('.book-description');\nconst amazonLink = document.querySelector('.amazon-link');\nconst bookshopLink = document.querySelector('.bookshop-link');\nconst applebooksLink = document.querySelector('.applebooks-link');\nconst addToListButton = document.querySelector('.add-to-list-button');\nconst bookAddingText = document.querySelector(\".book-adding-text\");\n\nlet bookData;\nlet bookShopingList =\n  JSON.parse(localStorage.getItem('bookShopingListLS')) || [];\n\njsBooks.addEventListener('click', openPopupModal);\npopupModalCloseButton.addEventListener('click', closePopupModal);\npopupModalBackground.addEventListener('click', event => {\n  if (event.target.classList.contains('popup-modal-background')) {\n    closePopupModal();\n  }\n});\ndocument.addEventListener('keydown', event => {\n  if (event.key === 'Escape') {\n    closePopupModal();\n  }\n});\n\nasync function openPopupModal(event) {\n  event.preventDefault();\n  if (!event.target.parentNode.hasAttribute('data-bookid')) {\n    return;\n  }\n  try {\n    bookData = await getBookInfo(event.target.parentNode.dataset.bookid);\n    jsBooks.removeEventListener('click', openPopupModal);\n    popupModalBackground.classList.replace('hidden', 'visible');\n    bookImage.setAttribute('src', bookData.book_image);\n    bookImage.setAttribute('alt', bookData.title);\n    bookTitle.textContent = bookData.title;\n    bookAuthor.textContent = bookData.author;\n    bookDescription.textContent = bookData.description;\n    const amazonURL = bookData.buy_links.find(\n      buyLink => buyLink.name === 'Amazon'\n    ).url;\n    const bookshopURL = bookData.buy_links.find(\n      buyLink => buyLink.name === 'Bookshop'\n    ).url;\n    const applebooksURL = bookData.buy_links.find(\n      buyLink => buyLink.name === 'Apple Books'\n    ).url;\n    amazonLink.setAttribute('href', amazonURL);\n    bookshopLink.setAttribute('href', bookshopURL);\n    applebooksLink.setAttribute('href', applebooksURL);\n    bookPresenseCheck();\n  } catch {\n    console.log('Error');\n  }\n}\n\nfunction closePopupModal() {\n  popupModalBackground.classList.replace('visible', 'hidden');\n  jsBooks.addEventListener('click', openPopupModal);\n}\n\nasync function getBookInfo(bookId) {\n  const response = await axios.get(\n    `https://books-backend.p.goit.global/books/${bookId}`\n  );\n  return await response.data;\n}\n\nfunction bookPresenseCheck() {\n  console.log(bookShopingList);\n  if (bookShopingList.some(book => book._id === bookData._id)) {\n    addToListButton.removeEventListener('click', addToListFunction);\n    addToListButton.addEventListener('click', removeFromListFunction);\n    addToListButton.textContent = 'REMOVE FROM SHOPING LIST';\n    bookAddingText.classList.replace('hidden', 'visible');\n  } else {\n    addToListButton.removeEventListener('click', removeFromListFunction);\n    addToListButton.addEventListener('click', addToListFunction);\n    addToListButton.textContent = 'ADD TO SHOPING LIST';\n    bookAddingText.classList.replace('visible', 'hidden');\n  }\n  localStorage.setItem('bookShopingListLS', JSON.stringify(bookShopingList));\n}\n\nfunction addToListFunction() {\n  console.log('Added!');\n  bookShopingList.push(bookData);\n  bookPresenseCheck();\n}\n\nfunction removeFromListFunction() {\n  console.log('Removed!');\n  bookShopingList = bookShopingList.filter(book => book._id !== bookData._id);\n  bookPresenseCheck();\n}\n"],"names":["$dae67d51b9dcdf97$var$bookData","$bpxeT","parcelRequire","$dae67d51b9dcdf97$var$jsBooks","document","querySelector","$dae67d51b9dcdf97$var$popupModalBackground","$dae67d51b9dcdf97$var$popupModalCloseButton","$dae67d51b9dcdf97$var$bookImage","$dae67d51b9dcdf97$var$bookTitle","$dae67d51b9dcdf97$var$bookAuthor","$dae67d51b9dcdf97$var$bookDescription","$dae67d51b9dcdf97$var$amazonLink","$dae67d51b9dcdf97$var$bookshopLink","$dae67d51b9dcdf97$var$applebooksLink","$dae67d51b9dcdf97$var$addToListButton","$dae67d51b9dcdf97$var$bookAddingText","$dae67d51b9dcdf97$var$bookShopingList","JSON","parse","localStorage","getItem","$dae67d51b9dcdf97$var$openPopupModal","event","$dae67d51b9dcdf97$var$_openPopupModal","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","amazonURL","bookshopURL","applebooksURL","preventDefault","target","parentNode","hasAttribute","$dae67d51b9dcdf97$var$getBookInfo","dataset","bookid","_ctx","sent","removeEventListener","classList","replace","setAttribute","book_image","title","textContent","author","description","buy_links","find","buyLink","name","url","$dae67d51b9dcdf97$var$bookPresenseCheck","console","log","$dae67d51b9dcdf97$var$closePopupModal","addEventListener","bookId","$dae67d51b9dcdf97$var$_getBookInfo","response","$dIxxU","default","get","concat","data","some","book","_id","$dae67d51b9dcdf97$var$addToListFunction","$dae67d51b9dcdf97$var$removeFromListFunction","setItem","stringify","push","filter","contains","key"],"version":3,"file":"index.51d65b84.js.map"}