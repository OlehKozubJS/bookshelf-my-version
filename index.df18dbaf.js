var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var i={id:e,exports:{}};return t[e]=i,n.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},e.parcelRequired7c6=n);var i=n("2shzp");const r=document.querySelector(".js-books"),l=document.querySelector(".popup-modal-background"),c=document.querySelector(".popup-modal-close-button"),d=document.querySelector(".book-image"),s=document.querySelector(".book-title-pop"),a=document.querySelector(".book-author"),u=document.querySelector(".book-description"),p=document.querySelector(".amazon-link"),b=document.querySelector(".bookshop-link"),k=document.querySelector(".applebooks-link"),f=document.querySelector(".add-to-list-button"),m=document.querySelector(".book-adding-text");let g,y=JSON.parse(localStorage.getItem("bookShopingListLS"))||[];async function v(e){if(e.preventDefault(),e.target.parentNode.hasAttribute("data-bookid"))try{g=await async function(e){const t=await i.default.get(`https://books-backend.p.goit.global/books/${e}`);return await t.data}(e.target.parentNode.dataset.bookid),r.removeEventListener("click",v),l.classList.replace("hidden","visible"),d.setAttribute("src",g.book_image),d.setAttribute("alt",g.title),s.textContent=g.title,a.textContent=g.author,u.textContent=g.description;const t=g.buy_links.find((e=>"Amazon"===e.name)).url,o=g.buy_links.find((e=>"Bookshop"===e.name)).url,n=g.buy_links.find((e=>"Apple Books"===e.name)).url;p.setAttribute("href",t),b.setAttribute("href",o),k.setAttribute("href",n),L()}catch{console.log("Error")}}function S(){l.classList.replace("visible","hidden"),r.addEventListener("click",v)}function L(){console.log(y),y.some((e=>e._id===g._id))?(f.removeEventListener("click",h),f.addEventListener("click",E),f.textContent="REMOVE FROM SHOPING LIST",m.classList.replace("hidden","visible")):(f.removeEventListener("click",E),f.addEventListener("click",h),f.textContent="ADD TO SHOPING LIST",m.classList.replace("visible","hidden")),localStorage.setItem("bookShopingListLS",JSON.stringify(y))}function h(){console.log("Added!"),y.push(g),L()}function E(){console.log("Removed!"),y=y.filter((e=>e._id!==g._id)),L()}r.addEventListener("click",v),c.addEventListener("click",S),l.addEventListener("click",(e=>{e.target.classList.contains("popup-modal-background")&&S()})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&S()}));
//# sourceMappingURL=index.df18dbaf.js.map
